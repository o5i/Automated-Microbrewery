<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
   <TITLE>Modbus Slave C++ Library: MbusSerialSlaveProtocol Class Reference</TITLE>
   <LINK href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
   <table width="100%"><tr>
   <td valign=bottom><b><font color=black size=4>
      FieldTalk<small><sup>&#153;</sup></small> Modbus<small><sup>&reg;</sup></small> Slave Library<br>
      C++ Editions</font></b></td>
   <td valign=bottom align=right>
      <a href="http://www.focus-sw.com">
      <img src="focuslogo50x200.png" border=0 size="50%"
       alt="FOCUS Software Engineering" ></a></td>
   </tr></table>
   <hr size=4 noshade color=gray>

<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>MbusSerialSlaveProtocol Class Reference</h1>Inheritance diagram for MbusSerialSlaveProtocol:<p><center><img src="classMbusSerialSlaveProtocol__inherit__graph.gif" border="0" usemap="#MbusSerialSlaveProtocol__inherit__map" alt="Inheritance graph"></center>
<map name="MbusSerialSlaveProtocol__inherit__map">
<area href="classMbusAsciiSlaveProtocol.html" shape="rect" coords="7,999,194,1175" alt="">
<area href="classMbusRtuSlaveProtocol.html" shape="rect" coords="218,983,396,1191" alt="">
<area href="classMbusSlaveServer.html" shape="rect" coords="111,7,295,503" alt="">
</map>
Collaboration diagram for MbusSerialSlaveProtocol:<p><center><img src="classMbusSerialSlaveProtocol__coll__graph.gif" border="0" usemap="#MbusSerialSlaveProtocol__coll__map" alt="Collaboration graph"></center>
<map name="MbusSerialSlaveProtocol__coll__map">
<area href="classMbusSlaveServer.html" shape="rect" coords="12,7,196,503" alt="">
</map>
<a href="classMbusSerialSlaveProtocol-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
This base class realises the Modbus<sup>&reg;</sup> serial slave protocols. 
<p>
These methods apply to RTU and ASCII protocol flavours via inheritance. These classes provide functions to start-up and to execute the server engine which includes opening and closing of the serial port. Upon receipt of a valid master query the server engine calls Data Provider methods to exchange data with the user application. For a more detailed description which Modbus data and control functions have been implemented in the server engine see section <a class="el" href="group__mbusslave.html">Server Functions common to all Protocol Flavours</a>.<p>
It is possible to instantiate multiple instances for establishing multiple connections on different serial ports (They should be executed in separate threads).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__mbusslave.html">Server Functions common to all Protocol Flavours</a>, <a class="el" href="classMbusSlaveServer.html">MbusSlaveServer</a> </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Serial Server Management Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_0">startupServer</a> (const char *const portName, long baudRate, int dataBits, int stopBits, int parity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puts the Modbus server into operation.  <a href="#MbusSerialSlaveProtocolz27_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_1">startupServer</a> (const char *const portName, long baudRate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puts the Modbus RTU server into operation and opens the associated serial port with default port parameters.  <a href="#MbusSerialSlaveProtocolz27_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_2">startupServer</a> (int slaveAddr, const char *const portName, long baudRate, int dataBits, int stopBits, int parity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puts the Modbus server into operation using a single slave address and data table.  <a href="#MbusSerialSlaveProtocolz27_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_3">startupServer</a> (int slaveAddr, const char *const portName, long baudRate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puts the Modbus RTU server into operation and opens the associated serial port with default port parameters.  <a href="#MbusSerialSlaveProtocolz27_3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_4">shutdownServer</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shuts down the Modbus server.  <a href="#MbusSerialSlaveProtocolz27_4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_5">isStarted</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns if server has been started up.  <a href="#MbusSerialSlaveProtocolz27_5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_6">getConnectionStatus</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if a Modbus master is polling periodically.  <a href="#MbusSerialSlaveProtocolz27_6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolz27_7">enableRs485Mode</a> (int rtsDelay)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enables RS485 mode.  <a href="#MbusSerialSlaveProtocolz27_7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Server Management Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga0">addDataTable</a> (int slaveAddr, <a class="el" href="classMbusDataTableInterface.html">MbusDataTableInterface</a> *dataTablePtr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Associates a protocol object with a Data Provider and a slave address.  <a href="group__mbusslave.html#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga8">serverLoop</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modbus slave server loop.  <a href="group__mbusslave.html#ga8"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protocol Configuration</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga1">setTimeout</a> (long timeOut)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configures master transmit time-out supervision.  <a href="group__mbusslave.html#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga4">getTimeout</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the master time-out supervision value.  <a href="group__mbusslave.html#ga4"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Transmission Statistic Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga2">getTotalCounter</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns how often a message transfer has been executed.  <a href="group__mbusslave.html#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga5" doxytag="MbusSerialSlaveProtocol::resetTotalCounter"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga5">resetTotalCounter</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resets total message transfer counter. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga6">getSuccessCounter</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns how often a message transfer was successful.  <a href="group__mbusslave.html#ga6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga7" doxytag="MbusSerialSlaveProtocol::resetSuccessCounter"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga7">resetSuccessCounter</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resets successful message transfer counter. <br></td></tr>
<tr><td colspan="2"><br><h2>Utility Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mbusslave.html#ga3">getPackageVersion</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the package version number.  <a href="group__mbusslave.html#ga3"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw7MbusSerialSlaveProtocolw0">SER_DATABITS_7</a> =  SerialPort::SER_DATABITS_7, 
<a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw7MbusSerialSlaveProtocolw1">SER_DATABITS_8</a> =  SerialPort::SER_DATABITS_8
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw8MbusSerialSlaveProtocolw2">SER_STOPBITS_1</a> =  SerialPort::SER_STOPBITS_1, 
<a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw8MbusSerialSlaveProtocolw3">SER_STOPBITS_2</a> =  SerialPort::SER_STOPBITS_2
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw9MbusSerialSlaveProtocolw4">SER_PARITY_NONE</a> =  SerialPort::SER_PARITY_NONE, 
<a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw9MbusSerialSlaveProtocolw5">SER_PARITY_EVEN</a> =  SerialPort::SER_PARITY_EVEN, 
<a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolw9MbusSerialSlaveProtocolw6">SER_PARITY_ODD</a> =  SerialPort::SER_PARITY_ODD
 }</td></tr>

<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolx2MbusSerialSlaveProtocolx0">SER_RS232</a>, 
<a class="el" href="classMbusSerialSlaveProtocol.html#MbusSerialSlaveProtocolx2MbusSerialSlaveProtocolx1">SER_RS485</a>
 }</td></tr>

</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="MbusSerialSlaveProtocolw7" doxytag="MbusSerialSlaveProtocol::@1"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw7MbusSerialSlaveProtocolw0" doxytag="SER_DATABITS_7"></a>SER_DATABITS_7</em>&nbsp;</td><td>
7 data bits </td></tr>
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw7MbusSerialSlaveProtocolw1" doxytag="SER_DATABITS_8"></a>SER_DATABITS_8</em>&nbsp;</td><td>
8 data bits </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolw8" doxytag="MbusSerialSlaveProtocol::@2"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw8MbusSerialSlaveProtocolw2" doxytag="SER_STOPBITS_1"></a>SER_STOPBITS_1</em>&nbsp;</td><td>
1 stop bit </td></tr>
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw8MbusSerialSlaveProtocolw3" doxytag="SER_STOPBITS_2"></a>SER_STOPBITS_2</em>&nbsp;</td><td>
2 stop bits </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolw9" doxytag="MbusSerialSlaveProtocol::@3"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw9MbusSerialSlaveProtocolw4" doxytag="SER_PARITY_NONE"></a>SER_PARITY_NONE</em>&nbsp;</td><td>
No parity. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw9MbusSerialSlaveProtocolw5" doxytag="SER_PARITY_EVEN"></a>SER_PARITY_EVEN</em>&nbsp;</td><td>
Even parity. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolw9MbusSerialSlaveProtocolw6" doxytag="SER_PARITY_ODD"></a>SER_PARITY_ODD</em>&nbsp;</td><td>
Odd parity. </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolx2" doxytag="MbusSerialSlaveProtocol::@4"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolx2MbusSerialSlaveProtocolx0" doxytag="SER_RS232"></a>SER_RS232</em>&nbsp;</td><td>
RS232 mode w/o RTS/CTS handshake. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="MbusSerialSlaveProtocolx2MbusSerialSlaveProtocolx1" doxytag="SER_RS485"></a>SER_RS485</em>&nbsp;</td><td>
RS485 mode: RTS enables/disables transmitter. </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="MbusSerialSlaveProtocolz27_0" doxytag="MbusSerialSlaveProtocol::startupServer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int startupServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *const &nbsp;</td>
          <td class="mdname" nowrap> <em>portName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>baudRate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dataBits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>stopBits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>parity</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Puts the Modbus server into operation. 
<p>
This function opens the serial port. After the port has been opened queries from a Modbus master will be processed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>portName</em>&nbsp;</td><td>Serial port identifier (e.g. "COM1", "/dev/ser1 or /dev/ttyS0") </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baudRate</em>&nbsp;</td><td>The port baudRate in bps (typically 1200 - 9600). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataBits</em>&nbsp;</td><td>Must be SER_DATABITS_8 for RTU </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stopBits</em>&nbsp;</td><td>SER_STOPBITS_1: 1 stop bit, SER_STOPBITS_2: 2 stop bits </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parity</em>&nbsp;</td><td>SER_PARITY_NONE: no parity, SER_PARITY_ODD: odd parity, SER_PARITY_EVEN: even parity </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>FTALK_SUCCESS on success or error code. See <a class="el" href="group__buserror.html">Protocol Errors and Exceptions</a> for a list of error codes. </dd></dl>

<p>
Reimplemented in <a class="el" href="classMbusRtuSlaveProtocol.html#MbusRtuSlaveProtocola2">MbusRtuSlaveProtocol</a>.    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_1" doxytag="MbusSerialSlaveProtocol::startupServer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int startupServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *const &nbsp;</td>
          <td class="mdname" nowrap> <em>portName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>baudRate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Puts the Modbus RTU server into operation and opens the associated serial port with default port parameters. 
<p>
This function opens the serial port with 8 databits, 1 stopbit and even parity and initialises the server engine.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>portName</em>&nbsp;</td><td>Serial port identifier (e.g. "COM1", "/dev/ser1" or "/dev/ttyS0") </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baudRate</em>&nbsp;</td><td>The port baudRate in bps (typically 1200 - 9600). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>FTALK_SUCCESS on success or error code. See <a class="el" href="group__buserror.html">Protocol Errors and Exceptions</a> for a list of error codes. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_2" doxytag="MbusSerialSlaveProtocol::startupServer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int startupServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>slaveAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *const &nbsp;</td>
          <td class="mdname" nowrap> <em>portName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>baudRate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dataBits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>stopBits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>parity</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Puts the Modbus server into operation using a single slave address and data table. 
<p>
This function opens the serial port. After the port has been opened queries from a Modbus master will be processed.<p>
Function is kept for compatibility with previous API versions, do not use for new implementations.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>slaveAddr</em>&nbsp;</td><td>Modbus slave address for server to listen on (1-255) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>portName</em>&nbsp;</td><td>Serial port identifier (e.g. "COM1", "/dev/ser1 or /dev/ttyS0") </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baudRate</em>&nbsp;</td><td>The port baudRate in bps (typically 1200 - 9600). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataBits</em>&nbsp;</td><td>Must be SER_DATABITS_8 for RTU </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stopBits</em>&nbsp;</td><td>SER_STOPBITS_1: 1 stop bit, SER_STOPBITS_2: 2 stop bits </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parity</em>&nbsp;</td><td>SER_PARITY_NONE: no parity, SER_PARITY_ODD: odd parity, SER_PARITY_EVEN: even parity </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>FTALK_SUCCESS on success or error code. See <a class="el" href="group__buserror.html">Protocol Errors and Exceptions</a> for a list of error codes. </dd></dl>
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>This function is deprecated. The preferred way of assigning a slave address is using the default constructor and configuring data table and slave address using addDataTable method. </dd></dl>

<p>
Reimplemented in <a class="el" href="classMbusRtuSlaveProtocol.html#MbusRtuSlaveProtocola3">MbusRtuSlaveProtocol</a>.    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_3" doxytag="MbusSerialSlaveProtocol::startupServer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int startupServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>slaveAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *const &nbsp;</td>
          <td class="mdname" nowrap> <em>portName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>baudRate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Puts the Modbus RTU server into operation and opens the associated serial port with default port parameters. 
<p>
This function opens the serial port with 8 databits, 1 stopbit and even parity and initialises the server engine.<p>
Function is kept for compatibility with previous API versions, do not use for new implementations.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>slaveAddr</em>&nbsp;</td><td>Modbus slave address for server to listen on (1-255) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>portName</em>&nbsp;</td><td>Serial port identifier (e.g. "COM1", "/dev/ser1" or "/dev/ttyS0") </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baudRate</em>&nbsp;</td><td>The port baudRate in bps (typically 1200 - 9600). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>FTALK_SUCCESS on success or error code. See <a class="el" href="group__buserror.html">Protocol Errors and Exceptions</a> for a list of error codes. </dd></dl>
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>This function is deprecated. The preferred way of assigning a slave address is using the default constructor and configuring data table and slave address using addDataTable method. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_4" doxytag="MbusSerialSlaveProtocol::shutdownServer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void shutdownServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Shuts down the Modbus server. 
<p>
This function also closes the serial port. 
<p>
Reimplemented from <a class="el" href="group__mbusslave.html#ga9">MbusSlaveServer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_5" doxytag="MbusSerialSlaveProtocol::isStarted"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int isStarted           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns if server has been started up. 
<p>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>= started </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>= shutdown </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="group__mbusslave.html#ga10">MbusSlaveServer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_6" doxytag="MbusSerialSlaveProtocol::getConnectionStatus"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int getConnectionStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if a Modbus master is polling periodically. 
<p>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>= A master is polling at a frequency higher than the master transmit time-out value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>= No master is polling within the time-out period </td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd>The master transmit time-out value must be set &gt; 0 in order for this function to work. </dd></dl>

<p>
Implements <a class="el" href="group__mbusslave.html#ga11">MbusSlaveServer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="MbusSerialSlaveProtocolz27_7" doxytag="MbusSerialSlaveProtocol::enableRs485Mode"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int enableRs485Mode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>rtsDelay</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enables RS485 mode. 
<p>
In RS485 mode the RTS signal can be used to enable and disable the transmitter of a RS232/RS485 converter. The RTS signal is asserted before sending data. It is cleared after the transmit buffer has been emptied and in addition the specified delay time has elapsed. The delay time is necessary because even the transmit buffer is already empty, the UART's FIFO will still contain unsent characters.<p>
<dl compact><dt><b>Warning:</b></dt><dd>The use of RTS controlled RS232/RS485 converters should be avoided if possible. It is difficult to determine the exact time when to switch off the transmitter with non real-time operating systems like Windows and Linux. If it is switched off to early characters might still sit in the FIFO or the transmit register of the UART and these characters will be lost. Hence the slave will not recognize the message. On the other hand if it is switched off too late then the slave's message is corrupted and the master will not recognize the message.</dd></dl>
<dl compact><dt><b>Remarks:</b></dt><dd>The delay value is indicative only and not guaranteed to be maintained. How precise it is followed depends on the operating system used, it's scheduling priority and it's system timer resolution. </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>A protocol must be closed in order to configure it. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rtsDelay</em>&nbsp;</td><td>Delay time in ms (Range: 0 - 100000) which applies after the transmit buffer is empty. 0 disables this mode. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>FTALK_SUCCESS</em>&nbsp;</td><td>Success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FTALK_ILLEGAL_ARGUMENT_ERROR</em>&nbsp;</td><td>Argument out of range </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FTALK_ILLEGAL_STATE_ERROR</em>&nbsp;</td><td>Protocol is already open </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
   <hr>
   <table width="100%" cellspacing=0 cellpadding=5 border=0>
      <tr>
         <td class=footer valign=top>
         Copyright &copy; 2002-2006 <a href="http://www.focus-sw.com">
         FOCUS Software Engineering Pty Ltd</a>, Australia.
         All rights reserved.
         <br>
         Please see the <a href="notices.html">Notices</a> page for trademark notices.
         <br>
         Last updated: 20 Oct 2006
     </tr>
   </table>

</body>
</html>

